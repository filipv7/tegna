<!doctype html>
<html lang="nb">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kontakt — Firma</title>
  <meta name="description" content="Kontaktformular — send oss en forespørsel" />

  <style>
    /* Minimalni stilovi za preglednost */
    :root{
      --bg:#f7f9fb;
      --card:#fff;
      --muted:#6b7280;
      --primary:#0b70ff;
      --maxw:900px;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body{margin:0;background:var(--bg);color:#111;line-height:1.5}
    .site-header{background:#fff;border-bottom:1px solid #e6eef8;padding:1rem}
    .container{max-width:var(--maxw);margin:0 auto;padding:1rem}
    h1,h2{margin:.5rem 0}
    .muted{color:var(--muted)}
    main{padding:2rem 0}
    .contact{background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.95));padding:2rem;border-radius:8px;box-shadow:0 4px 12px rgba(15,23,42,.06)}
    .contact-form{display:grid;grid-template-columns:1fr;gap:.75rem;align-items:start}
    label{font-weight:600;font-size:.95rem}
    input[type="text"], input[type="email"], input[type="tel"], textarea{
      width:100%;padding:.6rem .75rem;border:1px solid #d0d7e3;border-radius:6px;background:var(--card);font-size:1rem
    }
    .form-row{display:flex;flex-direction:column;gap:.35rem}
    .btn{display:inline-block;background:var(--primary);color:white;padding:.6rem .85rem;border:none;border-radius:6px;cursor:pointer}
    .btn[disabled]{opacity:.6;cursor:wait}
    .help{font-size:.9rem;color:var(--muted)}
    /* Honeypot hidden field */
    .hidden-field{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .form-success{padding:1rem;border-radius:6px;background:#ecfdf5;color:#064e3b;margin-top:.75rem;border:1px solid #bbf7d0}
    footer{padding:2rem 0;color:var(--muted);font-size:.95rem}
    @media(min-width:700px){
      .contact{padding:3rem}
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>Firma</h1>
    </div>
  </header>

  <main class="container" id="main">
    <section id="kontakt" class="contact" aria-labelledby="kontakt-heading">
      <h2 id="kontakt-heading">Kontakt oss</h2>
      <p class="muted">Send oss en forespørsel, så tar vi kontakt innen kort tid.</p>

      <!--
        Netlify form setup:
        - data-netlify="true" required for Netlify to detect the form in the built HTML
        - data-netlify-honeypot="bot-field" + a hidden (visually hidden, not type="hidden") input for honeypot
        - Keep <input name="form-name" value="kontakt"> hidden so Netlify knows the form name
        - Optionally add action="/thank-you" to redirect to a thank-you page after submit (uncomment if you create that page)
      -->
      <form
        name="kontakt"
        method="POST"
        data-netlify="true"
        data-netlify-honeypot="bot-field"
        class="contact-form"
        id="kontakt-form"
        novalidate
      >
        <!-- Required by Netlify -->
        <input type="hidden" name="form-name" value="kontakt">

        <!-- Honeypot: hide it visually but make it present in DOM so bots might fill it -->
        <p class="hidden-field" aria-hidden="true">
          <label>Don't fill this out if you're human: <input name="bot-field" tabindex="-1" autocomplete="off"></label>
        </p>

        <div class="form-row">
          <label for="navn">Navn</label>
          <input id="navn" type="text" name="navn" required aria-required="true" autocomplete="name" />
        </div>

        <div class="form-row">
          <label for="email">E‑post</label>
          <input id="email" type="email" name="email" required aria-required="true" autocomplete="email" />
        </div>

        <div class="form-row">
          <label for="telefon">Telefon (valgfritt)</label>
          <input
            id="telefon"
            type="tel"
            name="telefon"
            inputmode="tel"
            pattern="[0-9+()\- \s]*"
            placeholder="+47 123 45 678"
            autocomplete="tel"
          >
          <small class="help">Formater: sifre, +, parenteser og bindestreker tillatt</small>
        </div>

        <div class="form-row">
          <label for="melding">Melding</label>
          <textarea id="melding" name="melding" rows="5" required aria-required="true"></textarea>
        </div>

        <!-- If you want Netlify reCAPTCHA, uncomment the following and enable reCAPTCHA in Netlify settings:
             <div data-netlify-recaptcha="true"></div>
        -->

        <div>
          <button type="submit" class="btn btn-primary" id="submit-btn">Send forespørsel</button>
        </div>

        <!-- Inline success message placeholder (will be filled by JS if JS is enabled) -->
        <div id="form-result" role="status" aria-live="polite"></div>
      </form>
    </section>
  </main>

  <footer class="container">
    <p>&copy; <span id="year"></span> Firma — Alle rettigheter reservert</p>
  </footer>

  <script>
    // Small JS enhancements:
    // - Prevent multiple submits
    // - Client-side required validation fallback and friendly messages
    // - Show an inline success message if the form submission proceeds (Netlify will process)
    (function(){
      document.getElementById('year').textContent = new Date().getFullYear();

      var form = document.getElementById('kontakt-form');
      var submitBtn = document.getElementById('submit-btn');
      var resultEl = document.getElementById('form-result');

      function showMessage(msg, success){
        resultEl.innerHTML = '';
        var div = document.createElement('div');
        div.className = success ? 'form-success' : 'form-error';
        div.textContent = msg;
        resultEl.appendChild(div);
      }

      form.addEventListener('submit', function(e){
        // Basic HTML5 validity check
        if (!form.checkValidity()) {
          // Let native validation show — but we can also show friendly text
          // Using setTimeout to allow browser to show native messages
          setTimeout(function(){
            showMessage('Vennligst fyll inn alle obligatoriske felter korrekt.', false);
          }, 10);
          return;
        }

        // Prevent double submit
        if (submitBtn.disabled) {
          e.preventDefault();
          return;
        }

        // Disable button briefly to avoid double clicks
        submitBtn.disabled = true;
        var originalText = submitBtn.textContent;
        submitBtn.textContent = 'Sender...';

        // Let the form submit normally (so Netlify can redirect to a thank-you page if configured).
        // We will re-enable the button if submission fails (we can't reliably detect success without AJAX).
        // If you want to submit via AJAX and show inline success without redirect, let me know and I'll add it.
        setTimeout(function(){
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
        }, 3000);
        // Note: do NOT call e.preventDefault() if you want the native POST to happen.
      });

      // Accessibility: show focus outline for keyboard users only
      (function(){
        function handleFirstTab(e) {
          if (e.key === 'Tab') {
            document.documentElement.classList.add('user-is-tabbing');
            window.removeEventListener('keydown', handleFirstTab);
          }
        }
        window.addEventListener('keydown', handleFirstTab);
      })();
    })();
  </script>
</body>
</html>
